<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>챌린지 페이지</title>
  <style>
    .challenge-container {
      margin-bottom: 20px;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
      background-color: #f9f9f9;
    }
  </style>
  <script>
    // 챌린지 단건 조회 시 주소 이동을 처리하는 함수
    function fetchChallenge() {
      const challengeId = document.getElementById('challengeId').value;
      if (challengeId) {
        window.location.href = `/api/challenges/${challengeId}`;
      } else {
        alert("챌린지 ID를 입력해주세요.");
      }
    }
  </script>
</head>
<body>
<h1>챌린지 페이지</h1>

<!-- 단건 챌린지 조회 -->
<div>
  <h2>챌린지 단건 조회</h2>
  <label for="challengeId">챌린지 ID:</label>
  <input type="text" id="challengeId" name="challengeId" placeholder="챌린지 ID 입력">
  <button type="button" onclick="fetchChallenge()">조회</button>
</div>

<!-- 전체 챌린지 조회 -->
<div>
  <h2>전체 챌린지 조회</h2>
  <form th:action="@{/api/challenges}" method="get">
    <button type="submit">전체 조회</button>
  </form>
</div>

<!-- 챌린지 생성 -->
<div>
  <h2>챌린지 생성</h2>
  <form th:action="@{/api/challenges}" method="post" enctype="multipart/form-data">
    <label for="hostId">호스트 ID:</label>
    <input type="text" id="hostId" name="dto.hostId" placeholder="호스트 ID 입력">
    <label for="categoryId">카테고리 ID:</label>
    <input type="text" id="categoryId" name="dto.categoryId" placeholder="카테고리 ID 입력">
    <label for="challengeName">챌린지 이름:</label>
    <input type="text" id="challengeName" name="dto.challengeName" placeholder="챌린지 이름 입력">
    <label for="challengeDate">챌린지 날짜:</label>
    <input type="text" id="challengeDate" name="dto.challengeDate" placeholder="YYYY-MM-DD">
    <label for="startTime">시작 시간:</label>
    <input type="text" id="startTime" name="dto.startTime" placeholder="HH:MM">
    <label for="endTime">종료 시간:</label>
    <input type="text" id="endTime" name="dto.endTime" placeholder="HH:MM">
    <label for="point">포인트:</label>
    <input type="number" id="point" name="dto.point" placeholder="포인트">
    <label for="upload">이미지 업로드:</label>
    <input type="file" id="upload" name="upload">
    <label for="minParticipantNum">최소 참가자 수:</label>
    <input type="number" id="minParticipantNum" name="dto.minParticipantNum" placeholder="최소 참가자 수">
    <label for="maxParticipantNum">최대 참가자 수:</label>
    <input type="number" id="maxParticipantNum" name="dto.maxParticipantNum" placeholder="최대 참가자 수">
    <button type="submit">챌린지 생성</button>
  </form>
</div>

<!-- 챌린지 예약 -->
<div>
  <h2>챌린지 예약</h2>
  <form th:action="@{/api/challenges/reservation/{challengeId}(challengeId=${challengeId})}" method="post">
    <label for="reserveChallengeId">챌린지 ID:</label>
    <input type="text" id="reserveChallengeId" name="challengeId" placeholder="예약할 챌린지 ID 입력">
    <button type="submit">예약하기</button>
  </form>
</div>

<!-- 결과 표시 (전체 챌린지 조회 결과) -->
<div>
  <h3>결과:</h3>
  <div th:each="challenge : ${result}" class="challenge-container">
    <p><strong>챌린지 ID:</strong> <span th:text="${challenge.challengeId}"></span></p>
    <p><strong>이름:</strong> <span th:text="${challenge.challengeName}"></span></p>
    <p><strong>포인트:</strong> <span th:text="${challenge.point}"></span></p>
    <p><strong>날짜:</strong> <span th:text="${challenge.challengeDate}"></span></p>
    <p><strong>시작 시간:</strong> <span th:text="${challenge.startTime}"></span></p>
    <p><strong>종료 시간:</strong> <span th:text="${challenge.endTime}"></span></p>
    <p><strong>참여자 수:</strong> <span th:text="${challenge.currentParticipantNum}"></span> / <span th:text="${challenge.maxParticipantNum}"></span></p>
  </div>
</div>
</body>
</html>
